!function(t){t.fn.hover3d=function(e){var l=t.extend({selector:null,perspective:1e3,sensitivity:20,invert:!1,shine:!1,hoverInClass:"hover-in",hoverOutClass:"hover-out",hoverClass:"hover-3d"},e);return this.each(function(){var e=t(this),u=e.find(l.selector);currentX=0,currentY=0,l.shine&&u.append('<div class="shine"></div>');var h=t(this).find(".shine");e.css({perspective:l.perspective+"px",transformStyle:"preserve-3d"}),u.css({perspective:l.perspective+"px",transformStyle:"preserve-3d"}),h.css({position:"absolute",top:0,left:0,bottom:0,right:0,transform:"translateZ(1px)","z-index":9}),e.on("mouseenter",function(){return u.addClass(l.hoverInClass+" "+l.hoverClass),currentX=currentY=0,void setTimeout(function(){u.removeClass(l.hoverInClass)},1e3)}),e.on("mousemove",function(e){return t=e,r=u.innerWidth(),s=u.innerHeight(),n=Math.round(t.pageX-u.offset().left),o=Math.round(t.pageY-u.offset().top),i=l.invert?(r/2-n)/l.sensitivity:-(r/2-n)/l.sensitivity,a=l.invert?-(s/2-o)/l.sensitivity:(s/2-o)/l.sensitivity,v=n-r/2,c=o-s/2,(p=180*Math.atan2(c,v)/Math.PI-90)<0&&(p+=360),u.css({perspective:l.perspective+"px",transformStyle:"preserve-3d",transform:"rotateY("+i+"deg) rotateX("+a+"deg)"}),void h.css("background","linear-gradient("+p+"deg, rgba(255,255,255,"+t.offsetY/s*.5+") 0%,rgba(255,255,255,0) 80%)");var t,r,s,n,o,i,a,v,c,p}),e.on("mouseleave",function(){return u.addClass(l.hoverOutClass+" "+l.hoverClass),u.css({perspective:l.perspective+"px",transformStyle:"preserve-3d",transform:"rotateX(0) rotateY(0)"}),void setTimeout(function(){u.removeClass(l.hoverOutClass+" "+l.hoverClass),currentX=currentY=0},1e3)})})}}(jQuery);